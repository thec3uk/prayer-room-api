{% extends "base.html" %}

{% block title %}Banned Words - Tim Creamer Prayer Room{% endblock %}

{% block extra_styles %}
.search-input {
    flex: 1;
}

.htmx-request .search-input {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cstyle%3E.spinner{transform-origin:center;animation:spin .75s infinite linear}@keyframes spin{100%{transform:rotate(360deg)}}%3C/style%3E%3Cg class='spinner'%3E%3Ccircle cx='12' cy='12' r='10' fill='none' stroke='%23ccc' stroke-width='2'/%3E%3Cpath fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' d='M12 2a10 10 0 0 1 10 10'/%3E%3C/g%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 18px;
}
{% endblock %}

{% block content %}
<h1>Banned Words</h1>

<div class="toolbar">
    <input type="text"
           name="search"
           class="search-input"
           placeholder="Search words..."
           value="{{ search }}"
           hx-get="{% url 'bannedword-list' %}"
           hx-trigger="input changed delay:300ms, search"
           hx-target="#bannedword-table"
           hx-swap="innerHTML"
           hx-push-url="true"
           hx-include="[name='sort'], [name='order']">
    <input type="hidden" name="sort" value="{{ sort }}">
    <input type="hidden" name="order" value="{{ order }}">
    {% if search %}
        <a href="{% url 'bannedword-list' %}" class="btn btn-secondary btn-sm">Clear</a>
    {% endif %}
    <a href="{% url 'bannedword-create' %}" class="btn btn-primary btn-sm">Add Banned Word</a>
</div>

<div id="bannedword-table">
    {% include "prayer_room_api/_bannedword_table.html" %}
</div>
{% endblock %}
