{% extends "base.html" %}

{% block title %}Email Templates - Prayer Room{% endblock %}

{% block content %}
<h1>Email Templates</h1>
<p class="subtitle">Edit email notification templates. Changes take effect immediately.</p>

<table class="data-table">
    <thead>
        <tr>
            <th>Template</th>
            <th>Subject</th>
            <th>Status</th>
            <th>Last Updated</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for template in object_list %}
        <tr>
            <td>
                <strong>{{ template.get_template_type_display }}</strong>
                <br>
                <small style="color: #666;">{{ all_context_info|default_if_none:""|dictsort:template.template_type }}</small>
            </td>
            <td>{{ template.subject|truncatechars:50 }}</td>
            <td>
                {% if template.is_active %}
                    <span class="badge badge-active">Active</span>
                {% else %}
                    <span class="badge badge-inactive">Inactive</span>
                {% endif %}
            </td>
            <td>{{ template.updated_at|date:"M d, Y H:i" }}</td>
            <td>
                <a href="{% url 'emailtemplate-update' template.pk %}" class="btn btn-sm btn-primary">Edit</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="empty-state">
                <h2>No email templates found</h2>
                <p>Run migrations to seed default templates.</p>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
